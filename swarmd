#!/bin/bash

# Handle docker-rebuild command
if [ "$1" = "docker-rebuild" ]; then
    echo "Rebuilding Docker image..."
    docker build -t swarm-python . --no-cache
    exit 0
fi

# Build the Docker image if it doesn't exist
docker build -t swarm-python . 2>/dev/null

# Run the container with all folders mounted
docker run -it \
    -v "$(pwd)/swarm:/app/swarm" \
    -v "$(pwd)/abis:/app/abis" \
    -v "$(pwd)/addresses:/app/addresses" \
    -v "$(pwd)/proofs:/app/proofs" \
    swarm-python python -m swarm "$@" 